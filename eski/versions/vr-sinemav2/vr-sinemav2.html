<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VR Sinema - Sosyal Ä°zleme</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.2/dist/aframe-environment-component.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<!-- 2D UI Overlay -->
<div id="ui-overlay">
    <div class="ui-container">
        <h1>ğŸ¬ VR Sosyal Sinema</h1>
        
        <!-- Ana MenÃ¼ -->
        <div id="main-menu">
            <h2>HoÅŸ Geldiniz</h2>
            <button onclick="showCreateRoom()">â• Yeni Oda OluÅŸtur</button>
            <button onclick="showRoomList()" class="secondary">ğŸšª Odalara GÃ¶zat</button>
        </div>
        
        <!-- Oda OluÅŸturma -->
        <div id="create-room" style="display: none;">
            <h2>Yeni Oda OluÅŸtur</h2>
            <input type="text" id="room-name-input" placeholder="Oda AdÄ± (Ã¶rn: Film Gecesi)" />
            
            <div class="info-box">
                ğŸ’¡ <strong>Ã–nerilen Video Servisleri:</strong><br>
                ğŸ”¹ <strong>Catbox.moe</strong> - Ãœcretsiz, 200 MB limit<br>
                ğŸ”¹ <strong>Bunny.net</strong> - Profesyonel, $1/ay<br>
                ğŸ”¹ <strong>Direkt .mp4 linki</strong> - Herhangi bir kaynak<br>
                <br>
                âš ï¸ Google Drive, pCloud, Koofr Ã§alÄ±ÅŸmayabilir
            </div>
            
            <textarea id="video-url-input" placeholder="Video URL (Catbox, Bunny veya direkt .mp4 linki)

Ã–rnek:
https://files.catbox.moe/abc123.mp4
https://yourzone.b-cdn.net/video.mp4
https://example.com/video.mp4"></textarea>
            
            <div class="checkbox-container">
                <input type="checkbox" id="private-room-check" />
                <label for="private-room-check">ğŸ”’ Ã–zel Oda (Åifre KorumalÄ±)</label>
            </div>
            
            <input type="password" id="room-password-input" placeholder="Oda Åifresi (opsiyonel)" style="display: none;" />
            
            <label for="screen-size">Ekran Boyutu:</label>
            <select id="screen-size">
                <option value="normal">Normal (16m)</option>
                <option value="large" selected>BÃ¼yÃ¼k (24m)</option>
                <option value="xlarge">Ã‡ok BÃ¼yÃ¼k (32m)</option>
                <option value="imax">IMAX (40m)</option>
            </select>
            
            <div class="radio-container">
                <strong>ğŸ® Video KontrolÃ¼:</strong>
                <label>
                    <input type="radio" name="control-mode" value="owner" checked>
                    Sadece oda sahibi kontrol edebilir
                </label>
                <label>
                    <input type="radio" name="control-mode" value="everyone">
                    Herkes kontrol edebilir
                </label>
            </div>
            
            <h2>ğŸ­ Sinema OrtamÄ± SeÃ§in (13 SeÃ§enek)</h2>
            <div class="environment-grid" id="environment-selector">
                <div class="environment-card selected" data-env="none" onclick="selectEnvironment('none', this)">
                    <div class="environment-icon">â¬›</div>
                    <div class="environment-name">OrtamsÄ±z</div>
                    <div class="environment-desc">Sade karanlÄ±k</div>
                </div>
                <div class="environment-card" data-env="theater" onclick="selectEnvironment('theater', this)">
                    <div class="environment-icon">ğŸª</div>
                    <div class="environment-name">Klasik Sinema</div>
                    <div class="environment-desc">Geleneksel salon</div>
                </div>
                <div class="environment-card" data-env="space" onclick="selectEnvironment('space', this)">
                    <div class="environment-icon">ğŸŒŒ</div>
                    <div class="environment-name">Uzay Ä°stasyonu</div>
                    <div class="environment-desc">YÄ±ldÄ±zlar arasÄ±</div>
                </div>
                <div class="environment-card" data-env="forest" onclick="selectEnvironment('forest', this)">
                    <div class="environment-icon">ğŸŒ²</div>
                    <div class="environment-name">Orman</div>
                    <div class="environment-desc">DoÄŸanÄ±n iÃ§i</div>
                </div>
                <div class="environment-card" data-env="desert" onclick="selectEnvironment('desert', this)">
                    <div class="environment-icon">ğŸœï¸</div>
                    <div class="environment-name">Ã‡Ã¶l Gece</div>
                    <div class="environment-desc">YÄ±ldÄ±zlÄ± gÃ¶kyÃ¼zÃ¼</div>
                </div>
                <div class="environment-card" data-env="moon" onclick="selectEnvironment('moon', this)">
                    <div class="environment-icon">ğŸŒ™</div>
                    <div class="environment-name">Ay YÃ¼zeyi</div>
                    <div class="environment-desc">DÃ¼nya manzarasÄ±</div>
                </div>
                <div class="environment-card" data-env="cyberpunk" onclick="selectEnvironment('cyberpunk', this)">
                    <div class="environment-icon">ğŸŒƒ</div>
                    <div class="environment-name">Cyberpunk</div>
                    <div class="environment-desc">Neon Ä±ÅŸÄ±klar</div>
                </div>
                <div class="environment-card" data-env="underwater" onclick="selectEnvironment('underwater', this)">
                    <div class="environment-icon">ğŸŒŠ</div>
                    <div class="environment-name">Su AltÄ±</div>
                    <div class="environment-desc">Okyanus derinliÄŸi</div>
                </div>
                <div class="environment-card" data-env="mountain" onclick="selectEnvironment('mountain', this)">
                    <div class="environment-icon">â›°ï¸</div>
                    <div class="environment-name">DaÄŸ Zirvesi</div>
                    <div class="environment-desc">Bulutlar Ã¼stÃ¼</div>
                </div>
                <div class="environment-card" data-env="volcano" onclick="selectEnvironment('volcano', this)">
                    <div class="environment-icon">ğŸŒ‹</div>
                    <div class="environment-name">Volkan</div>
                    <div class="environment-desc">AteÅŸ ve lav</div>
                </div>
                <div class="environment-card" data-env="fantasy" onclick="selectEnvironment('fantasy', this)">
                    <div class="environment-icon">âœ¨</div>
                    <div class="environment-name">Fantastik</div>
                    <div class="environment-desc">RÃ¼ya gibi</div>
                </div>
                <div class="environment-card" data-env="city" onclick="selectEnvironment('city', this)">
                    <div class="environment-icon">ğŸ™ï¸</div>
                    <div class="environment-name">Åehir</div>
                    <div class="environment-desc">GÃ¶kdelenler</div>
                </div>
                <div class="environment-card" data-env="beach" onclick="selectEnvironment('beach', this)">
                    <div class="environment-icon">ğŸ–ï¸</div>
                    <div class="environment-name">Sahil</div>
                    <div class="environment-desc">GÃ¼n batÄ±mÄ±</div>
                </div>
            </div>
            
            <br>
            <button onclick="createRoom()">ğŸ¬ Oda OluÅŸtur ve BaÅŸlat</button>
            <button onclick="showMainMenu()" class="secondary">â—€ Geri</button>
        </div>
        
        <!-- Oda Listesi -->
        <div id="room-list" style="display: none;">
            <h2>Aktif Odalar</h2>
            <div id="rooms-container">
                <div class="loading">â³ Odalar yÃ¼kleniyor...</div>
            </div>
            <br>
            <button onclick="refreshRooms()" class="secondary">ğŸ”„ Yenile</button>
            <button onclick="showMainMenu()" class="secondary">â—€ Geri</button>
        </div>
        
        <!-- Åifre GiriÅŸi -->
        <div id="password-prompt" style="display: none;">
            <h2>ğŸ”’ Åifreli Oda</h2>
            <p id="password-room-name"></p>
            <input type="password" id="room-password-join" placeholder="Oda Åifresi" />
            <br><br>
            <button onclick="joinWithPassword()">GiriÅŸ Yap</button>
            <button onclick="showRoomList()" class="secondary">â—€ Geri</button>
        </div>
    </div>
</div>

<!-- Oda Silme Onay ModalÄ± -->
<div id="delete-modal" class="modal">
    <div class="modal-content">
        <h2>ğŸšª Odadan Ã‡Ä±kÄ±ÅŸ</h2>
        <p>Siz bu odanÄ±n sahibisiniz.</p>
        <p><strong>OdayÄ± silmek istiyor musunuz?</strong></p>
        <div class="warning-box">
            âš ï¸ <strong>OdayÄ± silerseniz:</strong> DiÄŸer katÄ±lÄ±mcÄ±lar da otomatik olarak Ã§Ä±karÄ±lÄ±r.<br><br>
            âœ… <strong>AÃ§Ä±k bÄ±rakÄ±rsanÄ±z:</strong> Oda sahipliÄŸi bir sonraki kiÅŸiye devredilir.<br>
            â€¢ Odada baÅŸkalarÄ± varsa â†’ Sahiplik devredilir<br>
            â€¢ Odada kimse yoksa â†’ Oda sahipsiz kalÄ±r, ilk giren sahip olur
        </div>
        <div class="modal-buttons">
            <button onclick="confirmDeleteRoom(false)" class="secondary">HayÄ±r, AÃ§Ä±k BÄ±rak</button>
            <button onclick="confirmDeleteRoom(true)" class="danger">Evet, Sil</button>
        </div>
    </div>
</div>

<!-- VR Kontrolleri -->
<div id="vr-controls">
    <button onclick="togglePlayPause()">â¯ Play/Pause</button>
    <button onclick="stopVideo()" class="stop">â¹ Durdur (BaÅŸa Sar)</button>
    <button onclick="leaveRoom()">ğŸšª Odadan Ã‡Ä±k</button>
</div>

<!-- Oda Bilgisi -->
<div id="room-info-display">
    <div><span id="status-indicator" class="status-indicator connected"></span> <span id="room-title">Oda</span></div>
    <div style="font-size: 0.8em; margin-top: 5px;">ğŸ‘¥ <span id="viewers-count">0</span> Ä°zleyici</div>
    <div id="video-service-badge" style="margin-top: 5px;"></div>
    <div id="environment-badge" style="margin-top: 5px; font-size: 0.8em;"><span id="env-name">Ortam</span></div>
    <div id="control-mode-badge" style="margin-top: 5px; font-size: 0.8em;">ğŸ® <span id="control-mode-text">Kontrol</span></div>
    <div id="sync-status">â±ï¸ 3 saniye sonra baÅŸlÄ±yor...</div>
</div>

<!-- Klavye KÄ±sayollarÄ± YardÄ±m (H tuÅŸu ile aÃ§/kapa) -->
<div id="keyboard-help" class="keyboard-help">
    <h3>âŒ¨ï¸ Klavye KÄ±sayollarÄ±</h3>
    <ul>
        <li><kbd>Space</kbd> Play/Pause</li>
        <li><kbd>â†</kbd> <kbd>â†’</kbd> 10sn Geri/Ä°leri</li>
        <li><kbd>â†‘</kbd> <kbd>â†“</kbd> Ekran YukarÄ±/AÅŸaÄŸÄ±</li>
        <li><kbd>W</kbd> <kbd>A</kbd> <kbd>S</kbd> <kbd>D</kbd> Ekran Hareketi</li>
        <li><kbd>Q</kbd> <kbd>E</kbd> Ekran Ä°leri/Geri</li>
        <li><kbd>R</kbd> Ekran SÄ±fÄ±rla</li>
        <li><kbd>C</kbd> AltyazÄ± AÃ§/Kapa</li>
        <li><kbd>M</kbd> Sessiz</li>
        <li><kbd>F</kbd> Tam Ekran</li>
        <li><kbd>H</kbd> Bu YardÄ±mÄ± AÃ§/Kapa</li>
    </ul>
</div>

<!-- VR Sahnesi -->
<a-scene id="vr-scene" loading-screen="enabled: false">
    <a-entity id="environment-container"></a-entity>
    <a-video
        id="cinema-screen"
        src=""
        width="24"
        height="13.5"
        position="0 2 -15"
        visible="false"
    ></a-video>
    <a-plane 
        id="default-floor"
        position="0 0 0" 
        rotation="-90 0 0" 
        width="100" 
        height="100" 
        color="#1a1a1a"
        visible="true"
    ></a-plane>
    <a-light type="ambient" color="#444"></a-light>
    <a-light type="point" position="0 5 0" intensity="0.5"></a-light>
    <a-entity id="camera-rig" position="0 1.6 0">
        <a-camera></a-camera>
    </a-entity>
</a-scene>

<script src="js.js"></script>

</body>
</html>