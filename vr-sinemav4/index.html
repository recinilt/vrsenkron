<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VR Sinema - Optimize EdilmiÅŸ</title>
    
    <!-- A-Frame & KÃ¼tÃ¼phaneler -->
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.2/dist/aframe-environment-component.min.js"></script>
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    
    <!-- Ana CSS -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>

<!-- ============================================
     2D UI OVERLAY - ANA MENÃœ
     ============================================ -->
<div id="ui-overlay">
    <div class="ui-container">
        <h1>ğŸ¬ VR Sosyal Sinema</h1>
        <p style="text-align: center; color: #667eea; font-weight: 600;">âš¡ Optimize EdilmiÅŸ Versiyon</p>
        
        <!-- Ana MenÃ¼ -->
        <div id="main-menu">
            <h2>HoÅŸ Geldiniz</h2>
            <button onclick="showCreateRoom()">â• Yeni Oda OluÅŸtur</button>
            <button onclick="showRoomList()" class="secondary">ğŸšª Odalara GÃ¶zat</button>
        </div>
        
        <!-- Oda OluÅŸturma -->
        <div id="create-room" style="display: none;">
            <h2>Yeni Oda OluÅŸtur</h2>
            <input type="text" id="room-name-input" placeholder="Oda AdÄ± (Ã¶rn: Film Gecesi)" />
            
            <div class="info-box">
                ğŸ’¡ <strong>Ã–nerilen Video Servisleri:</strong><br>
                ğŸ”¹ <strong>Catbox.moe</strong> - Ãœcretsiz, 200 MB limit<br>
                ğŸ”¹ <strong>Bunny.net</strong> - Profesyonel, $1/ay<br>
                ğŸ”¹ <strong>Direkt .mp4 linki</strong> - Herhangi bir kaynak<br>
            </div>
            
            <textarea id="video-url-input" placeholder="Video URL (Catbox, Bunny veya direkt .mp4 linki)

Ã–rnek:
https://files.catbox.moe/abc123.mp4
https://yourzone.b-cdn.net/video.mp4"></textarea>
            
            <div class="checkbox-container">
                <input type="checkbox" id="private-room" />
                <label for="private-room">ğŸ”’ Ã–zel Oda (Åifre KorumalÄ±)</label>
            </div>
            
            <input type="password" id="room-password" placeholder="Oda Åifresi (opsiyonel)" style="display: none;" />
            
            <label for="screen-size">Ekran Tipi:</label>
            <select id="screen-size">
                <option value="flat">DÃ¼z Ekran (16:9)</option>
                <option value="360">360Â° Video</option>
                <option value="180">180Â° Video</option>
            </select>
            
            <div class="radio-container">
                <strong>ğŸ® Video KontrolÃ¼:</strong>
                <label>
                    <input type="radio" name="control-mode" value="owner" checked>
                    Sadece oda sahibi kontrol edebilir
                </label>
                <label>
                    <input type="radio" name="control-mode" value="everyone">
                    Herkes kontrol edebilir
                </label>
            </div>
            
            <h2>ğŸ­ Sinema OrtamÄ± SeÃ§in (5 Hafif Ortam)</h2>
            <label for="environment-select">Ortam:</label>
            <select id="environment-select">
                <option value="none">OrtamsÄ±z (En Hafif)</option>
                <option value="default" selected>Klasik Sinema</option>
                <option value="forest">Orman</option>
                <option value="starry">YÄ±ldÄ±zlÄ± Gece</option>
                <option value="goaland">GÃ¶kyÃ¼zÃ¼ AdasÄ±</option>
            </select>
            
            <br><br>
            <button onclick="createRoom()">ğŸ¬ Oda OluÅŸtur ve BaÅŸlat</button>
            <button onclick="showMainMenu()" class="secondary">â—€ Geri</button>
        </div>
        
        <!-- Oda Listesi -->
        <div id="room-list" style="display: none;">
            <h2>Aktif Odalar</h2>
            <div id="rooms-list">
                <div class="loading">â³ Odalar yÃ¼kleniyor...</div>
            </div>
            <br>
            <button onclick="listRooms()" class="secondary">ğŸ”„ Manuel Yenile</button>
            <button onclick="showMainMenu()" class="secondary">â—€ Geri</button>
        </div>
    </div>
</div>

<!-- ============================================
     VR KONTROL PANELÄ°
     ============================================ -->
<div id="vr-controls">
    <button onclick="togglePlayPause()">â¯ Play/Pause</button>
    <button onclick="stopVideo()" class="stop">â¹ Durdur (BaÅŸa Sar)</button>
    <button onclick="location.reload()">ğŸšª Odadan Ã‡Ä±k</button>
</div>

<!-- ============================================
     ODA BÄ°LGÄ° PANELÄ°
     ============================================ -->
<div id="room-info-display">
    <div><strong id="room-name">Oda</strong></div>
    <div style="font-size: 0.9em; margin-top: 5px;">
        ğŸ‘¥ <span id="viewers-count">0</span> Ä°zleyici
    </div>
    <div style="font-size: 0.9em; margin-top: 5px;">
        ğŸ® <span id="control-mode">Kontrol Modu</span>
    </div>
    <div id="sync-status" style="margin-top: 10px; font-size: 0.85em; display: none;"></div>
</div>

<!-- ============================================
     VR SAHNESÄ°
     ============================================ -->
<a-scene loading-screen="enabled: false">
    <!-- Ortam -->
    <a-entity 
        id="environment" 
        environment="preset: default; lighting: distant;">
    </a-entity>
    
    <!-- Video EkranÄ± -->
    <a-plane 
        id="video-screen" 
        position="0 2 -10" 
        width="16" 
        height="9" 
        visible="false"
        material="shader: flat;">
    </a-plane>
    
    <!-- Zemin -->
    <a-plane 
        position="0 0 0" 
        rotation="-90 0 0" 
        width="100" 
        height="100" 
        color="#1a1a2e">
    </a-plane>
    
    <!-- IÅŸÄ±klandÄ±rma -->
    <a-light type="ambient" color="#444"></a-light>
    <a-light type="directional" position="0 10 5" intensity="0.5"></a-light>
    
    <!-- Kamera -->
    <a-entity id="camera-rig" position="0 1.6 0">
        <a-camera></a-camera>
    </a-entity>
</a-scene>

<!-- ============================================
     UI FONKSÄ°YONLARI
     ============================================ -->
<script>
// MenÃ¼ navigasyonu
function showMainMenu() {
    document.getElementById('main-menu').style.display = 'block';
    document.getElementById('create-room').style.display = 'none';
    document.getElementById('room-list').style.display = 'none';
}

function showCreateRoom() {
    document.getElementById('main-menu').style.display = 'none';
    document.getElementById('create-room').style.display = 'block';
    document.getElementById('room-list').style.display = 'none';
}

function showRoomList() {
    document.getElementById('main-menu').style.display = 'none';
    document.getElementById('create-room').style.display = 'none';
    document.getElementById('room-list').style.display = 'block';
    listRooms();
}

// Åifre checkbox kontrolÃ¼
document.addEventListener('DOMContentLoaded', () => {
    const privateCheckbox = document.getElementById('private-room');
    const passwordInput = document.getElementById('room-password');
    
    if (privateCheckbox) {
        privateCheckbox.addEventListener('change', (e) => {
            passwordInput.style.display = e.target.checked ? 'block' : 'none';
        });
    }
});
</script>

<!-- ============================================
     JAVASCRIPT MODÃœLLER (9 DOSYA - OPTÄ°MÄ°ZE EDÄ°LMÄ°Å)
     ============================================ -->
<script>
const v = new Date().getTime(); 
document.write('<script src="js/1-config.js?v=' + v + '"><\/script>');
document.write('<script src="js/2-globals.js?v=' + v + '"><\/script>');
document.write('<script src="js/3-ui-functions.js?v=' + v + '"><\/script>');
document.write('<script src="js/4-video-detection.js?v=' + v + '"><\/script>');
document.write('<script src="js/5-room-management.js?v=' + v + '"><\/script>');
document.write('<script src="js/6-video-setup.js?v=' + v + '"><\/script>');
document.write('<script src="js/7-video-controls.js?v=' + v + '"><\/script>');
document.write('<script src="js/8-firebase-sync.js?v=' + v + '"><\/script>');
document.write('<script src="js/9-init.js?v=' + v + '"><\/script>');
</script>

</body>
</html>
